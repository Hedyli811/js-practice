<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      let scores = ["88", "90", "100", "45", "60", "98", "32", "99", "80"];
      /**
       * @description 计算学生的总分数
       * @param {array} scores
       * @return {number} 学生的总分数
       */
      function getTotalScore(scores) {
        const total = scores.reduce((prev, current) => {
          return parseInt(prev) + parseInt(current);
        }, 0);
        return total;
      }

      /**
       * @description 获得学生的平均分
       * @param {array} scores
       * @return {number} 学生的平均分
       */
      function getAverageScore(scores) {
        const total = getTotalScore(scores);
        return (total / scores.length).toFixed(2);
      }

      /**
       * @description 获得挂科的分数
       * @param {array} scores
       * @return {array} 返回没有及格的分数
       */
      function getFailScores(scores) {
        // your code here
        const arr = scores.filter((scores) => {
          return scores < 60;
        });
        return arr;
      }

      /**
       * @description 获得加五分之后的成绩单，如果加五分之后，分数超过了100，就取100分
       * @param {array} scores
       * @return {array} 新的成绩单
       */
      function getAddFiveScores(scores) {
        // your code here
        const array = scores.map((score) => {
          let newScore = parseInt(score) + 5;
          return newScore > 100 ? 100 : newScore;
        });

        return array;
      }

      /**
       * @description 计算学生奖学金
       * @param {array} scores
       * @return { number} 奖学金
       */
      function getPrize(scores) {
        // your code here
        const scholorship = scores.filter((scores) => {
          return scores >= 90;
        });
        const number = scholorship.length * 100;
        return number;
      }
      console.log(getTotalScore(scores));

      console.log(getAverageScore(scores));

      console.log(getFailScores(scores));

      console.log(getAddFiveScores(scores));

      console.log(getPrize(scores));

      //   ----------------------------------------------task 2

      // 实现两个数组拼接,返回一个新数组
      function arrJoin(arr1, arr2) {
        // your implement
        const newArr = arr1.concat(arr2);
        return newArr;
      }
      //测试用例
      let arr1 = ["1", "2", "3"];
      let arr2 = ["3", "6", "1"];
      console.log(arrJoin(arr1, arr2)); // ['1','2','3','3','6','1']

      // 利用reduce()实现两个数组归并
      function arrMerge(arr1, arr2) {
        // your implement
        const mergeArr = arr1.reduce((result, current) => {
          if (!arr2.includes(current) && !result.includes(current)) {
            result.push(current);
          }
          return result;
        }, arr2);
        return mergeArr;
      }
      console.log(arrMerge(arr1, arr2));
      // 封装数组去重函数,去除数组中重复的元素,
      function norepeat(arr) {
        // your implement
        return arr.filter((item, index) => item.indexOf(item) !== index);
      }

      let arr = ["a", "ab", "a"];
      console.log(norepeat(arr));
      // 实现方法检测数组是否包含特定值
      function inArray(arr, value) {
        //your implement
        return arr.includes(value);
      }

      console.log(inArray(arr, "b")); //> false
      console.log(inArray(arr, "a")); //->true

      // 实现多维数组变为一维数组
      function matrixElements(arr) {
        //your implement
        const newArr = arr.reduce((prev, current) => {
          return prev.concat(current);
        });
        return newArr;
      }

      //测试用例
      let rows = [
        [2, 3, 5],
        [1, 2, 4],
        [8, 5, 5],
      ];
      console.log(matrixElements(rows)); //[2,3,5,1,2,4,8,5,5]

      //   ----------------------------------------------task 3

      var scoreObject = {
        Tony: {
          Math: 95,
          English: 79,
          Music: 68,
        },
        Simon: {
          Math: 100,
          English: 95,
          Music: 98,
        },
        Annie: {
          Math: 54,
          English: 65,
          Music: 88,
        },
      };
      console.log(scoreObject);
      //实现对象转换为数组
      function objToArr(obj) {
        var arr = [];

        //do something
        //for (var key in obj) 是一个用于遍历对象属性的语句。它的意思是对对象 obj 中的每个属性进行遍历，并将每个属性的名称赋值给变量 key，然后可以对这个属性进行操作。
        for (var key in obj) {
          var tempArr = [key, obj[key].English];
          arr.push(tempArr);
        }
        return arr;
      }
      console.log(objToArr(scoreObject));

      var menuArr = [
        [1, "Area1", -1],
        [2, "Area2", -1],
        [3, "Area1-1", 1],
        [4, "Area1-2", 1],
        [5, "Area2-1", 2],
        [6, "Area2-2", 2],
        [7, "Area1-2-3", 4],
        [8, "Area2-2-1", 6],
      ];

      //实现数组转换为对象
      function arrToObj(arr) {
        //do something
        const obj = {};
        arr.forEach(([id, label, parentId]) => {
          if (parentId === -1) {
            //给obj对象添加label和children的属性
            obj[id] = { label, children: [] };
          } else {
            const newItem = { label, children: [] };
            //如果您去掉了这行，当 parentID 不存在于对象中时，将会导致错误，因为您尝试在不存在的对象上调用 children.push() 方法。
            if (obj[parentId]) {
              obj[parentId].children.push(newItem);
            }
          }
        });
        return obj;
      }
      console.log(arrToObj(menuArr));
    </script>
  </body>
</html>
